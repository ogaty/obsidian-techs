(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{336:function(a,e,r){"use strict";r.r(e);var s=r(19),t=Object(s.a)({},(function(){var a=this,e=a._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"バリデーション"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#バリデーション"}},[a._v("#")]),a._v(" バリデーション")]),a._v(" "),e("h2",{attrs:{id:"requestクラスでやる"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#requestクラスでやる"}},[a._v("#")]),a._v(" Requestクラスでやる")]),a._v(" "),e("p",[e("code",[a._v("php artisan make:request")]),a._v(" で\nauthorizeをtrueにするのを忘れずに")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("    public function authorize()\n    {\n        return true;\n    }\n\n    public function rules()\n    {\n        return [\n            'name' => 'filled',\n            'email' => [\n                'filled',\n                'email',\n                Rule::unique('admin_users')->ignore($this->id),\n            ]\n        ];\n    }\n    \n    public function messages()\n    {\n    }\n")])])]),e("p",[a._v("pubf messagesでメッセージカスタマイズもできる")]),a._v(" "),e("h2",{attrs:{id:"controllerでやる"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#controllerでやる"}},[a._v("#")]),a._v(" Controllerでやる")]),a._v(" "),e("p",[a._v("勝手に元のページへリダイレクトされる")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("    $request = request();\n    $request->validate([\n        'email' => 'filled'\n    ], [\n        'email.filled' => 'message'\n    ]);\n")])])]),e("p",[a._v("failを使うなら")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("use Illuminate\\Support\\Facades\\Validator;\n\n        $rules = [\n            'name'=>'required',\n            'email'=>'required',\n            'password'=>'required'\n        ];\n\n        $messages = [\n            'name.required'=>'名前は必須です。',\n            'email.required'=>'emailは必須です。',\n            'password.required'=>'passwordは必須です。',\n        ];\n\n        $validation = Validator::make($request->all(),$rules,$messages);\n\n        if($validation->fails()){\n            return redirect()->back()->withInput($request->all())->withErrors($validation->errors());\n        }\n\n")])])]),e("h2",{attrs:{id:"viewへの表示"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#viewへの表示"}},[a._v("#")]),a._v(" viewへの表示")]),a._v(" "),e("h3",{attrs:{id:"一括"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一括"}},[a._v("#")]),a._v(" 一括")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('        @if ($errors->any())\n            <div class="col-12 mb-4">\n                <div class="card card-primary bg-danger">\n                    <div class="card-body">\n                        <ul>\n                            @foreach ($errors->all() as $error)\n                                <li>{{ $error }}</li>\n                            @endforeach\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        @endif\n')])])]),e("h3",{attrs:{id:"keyも取る"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#keyも取る"}},[a._v("#")]),a._v(" keyも取る")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('        @if ($errors->any())\n            <div class="col-12 mb-4">\n                <div class="card card-primary bg-danger">\n                    <div class="card-body">\n                        <ul>\n                            @foreach ($errors->getmessages() as $key => $error)\n                                <li>{{ $key . \':\' . $error }}</li>\n                            @endforeach\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        @endif\n')])])]),e("h2",{attrs:{id:"バリデーションエラー時のフォーム内容"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#バリデーションエラー時のフォーム内容"}},[a._v("#")]),a._v(" バリデーションエラー時のフォーム内容")]),a._v(" "),e("p",[a._v("Formファサード使っていれば入力項目は残っている")]),a._v(" "),e("p",[a._v("使わないのであればold('text')で取得可能")]),a._v(" "),e("p",[a._v("セッションにもold_inputとして入ってる")]),a._v(" "),e("h2",{attrs:{id:"注意"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#注意"}},[a._v("#")]),a._v(" 注意")]),a._v(" "),e("p",[a._v("複数validateの場合、最後にrequiredを入れないと動かない")])])}),[],!1,null,null,null);e.default=t.exports}}]);